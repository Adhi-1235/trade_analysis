# Trader Performance vs Market Sentiment Analysis

## Project Overview
This project analyzes how market sentiment (Fear/Greed index) influences trader behavior and performance on Hyperliquid. It involves loading and inspecting datasets, transforming data, creating key performance metrics, merging data with sentiment information, and conducting analyses to derive insights. The project also includes trader segmentation using clustering techniques, developing a predictive model for next-day profitability, and creating an interactive Streamlit dashboard to explore the findings.

## Setup and Installation
To run this project, you'll need Python and the following libraries:

```bash
pip install pandas matplotlib seaborn scikit-learn streamlit
```

## Data Files
Ensure the following CSV files are present in your project directory:
- `fear_greed_index.csv`: Contains market sentiment data.
- `historical_data.csv`: Contains historical trader transaction data.

Additionally, the following data files will be generated by the analysis scripts and are required for the Streamlit dashboard:
- `df_merged_data_sorted.csv`
- `sentiment_performance.csv`
- `sentiment_leverage_frequency_performance.csv`
- `df_pca.csv`

## Running the Analysis and Dashboard

1.  **Run the Jupyter Notebook/Colab Notebook**: Execute all cells in the provided notebook (`.ipynb` file) to perform data loading, preprocessing, metric calculation, sentiment analysis, trader segmentation, clustering, and predictive modeling. This will generate the necessary CSV files for the dashboard.

2.  **Launch the Streamlit Dashboard**: After executing the notebook cells and ensuring `app.py` and all generated CSV files are in the same directory, open your terminal or command prompt, navigate to the project directory, and run:
    ```bash
    streamlit run app.py
    ```
    This command will open the interactive dashboard in your web browser.

## Dashboard Features
The Streamlit dashboard provides interactive exploration of the analysis results, allowing users to:
- Filter data by market sentiment classification, leverage segment, and frequency segment.
- View Key Performance Indicators (KPIs) for the filtered data.
- Visualize performance metrics (PnL, win rate, trade size, trade count, leverage) by market sentiment.
- Explore mean PnL and long/short ratios across different trader segments (leverage and frequency).
- Visualize trader clusters using PCA-reduced data and understand their characteristics.

## Key Findings (Summary from Analysis)

### Data Analysis Key Findings
- **Dataset Overview**: The `df_fear_greed` dataset contained 2,644 rows and 4 columns with no missing values or duplicates. The `df_historical` dataset had 181,921 rows and 16 columns, with minor missing values (1 per column) in several columns, and no duplicate rows. Timestamp conversions were successfully handled, with one unparseable date in `df_historical` coerced to NaT.
- **Performance Metrics by Sentiment**: Initial analysis by sentiment showed that traders exhibited the highest average daily PnL during 'Fear' (3525.50) and 'Extreme Fear' (5257.13), while win rates were highest during 'Extreme Greed' (39.53%) and 'Neutral' (36.01%). Extremely high average leverage values were observed for some sentiments, indicating potential outliers or specific high-leverage strategies.
- **Trader Segmentation**: Traders were segmented into 'High Leverage' vs. 'Low Leverage' and 'Frequent Trader' vs. 'Infrequent Trader' based on median `avg_leverage` (29.13) and `trade_count` (27.0).
- **Segmented Performance by Sentiment**: Analysis across segments and sentiments revealed that Low-Leverage, Frequent Traders showed higher PnL during Fear and Extreme Fear. The `Mean Long/Short Ratio` consistently showed infinite values, indicating a predominant long-only trading behavior.
- **Trader Clustering**: K-means clustering identified four behavioral archetypes, though with highly imbalanced cluster distribution, which was visualized using PCA.

### Predictive Model Performance
- **Data Preparation**: Features included numerical (sentiment value, PnL, trade count, trade size, leverage, win rate, long/short ratio) and one-hot encoded categorical features. Target variables were next-day PnL and binary profitability.
- **Model Evaluation**: A Logistic Regression model predicting next-day profitability achieved 64.76% accuracy but struggled with predicting non-profitable days (recall of 0.05 for class 0).

## Insights or Next Steps
- **Improve Predictive Model**: Address class imbalance, explore new features, and experiment with alternative models (e.g., XGBoost, Random Forests).
- **Deep Dive into Trader Clusters**: Investigate highly imbalanced clusters, re-evaluate optimal cluster numbers, and create detailed profiles for meaningful clusters.
- **Investigate Long/Short Ratio Anomaly**: Understand the reasons behind the pervasive long-only bias (platform specifics, trader preference, data interpretation).
- **Refine Leverage Analysis**: Conduct outlier detection, rely more on median leverage, and perform contextual analysis for extremely high leverage usage.
